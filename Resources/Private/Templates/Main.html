<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Default" />

<f:section name="content">
    <h1 style="color: red; font-size: 24px;">PAGE LINK INSIGHTS TEST</h1>

    <link rel="stylesheet" href="{f:uri.resource(path: 'Css/styles.css', extensionName: 'page_link_insights')}" />
    <div class="module">
        <div class="module-body">
            <!-- Compact Site Analytics -->
            <f:if condition="{kpis}">
                <div class="panel panel-default" style="font-size: 12px; margin-bottom: 10px;">
                    <div class="panel-body" style="padding: 8px;">
                        <div style="display: inline-block; margin-right: 15px;">
                            <strong>Root:</strong> {kpis.site.siteRoot}
                        </div>
                        <div style="display: inline-block; margin-right: 15px;">
                            <strong>Pages:</strong> {kpis.site.totalPages}
                        </div>
                        <div style="display: inline-block; margin-right: 15px;">
                            <strong>Links:</strong> {kpis.site.totalLinks}
                        </div>
                        <div style="display: inline-block; margin-right: 15px;">
                            <strong>Broken:</strong> {kpis.site.brokenLinksCount}
                        </div>
                        <div style="display: inline-block; margin-right: 15px;">
                            <strong>Orphaned:</strong> {kpis.site.orphanedPages}
                        </div>
                        <div style="display: inline-block; margin-right: 15px;">
                            <strong>Links/Page:</strong> {kpis.site.avgLinksPerPage}
                        </div>
                        <div style="display: inline-block;">
                            <em>Last: {kpis.site.lastUpdate}</em>
                        </div>
                    </div>
                </div>
            </f:if>

            <!-- Force Diagram -->
            <div id="force-diagram-container" class="h-full w-full" style="height: calc(100vh - 80px); background-color: #1e1e1e;">
                <svg id="force-diagram" class="w-full h-full"></svg>
                <script id="diagram-data" type="application/json">
                    <f:format.raw>{data}</f:format.raw>
                </script>
            </div>
        </div>
    </div>
</f:section>